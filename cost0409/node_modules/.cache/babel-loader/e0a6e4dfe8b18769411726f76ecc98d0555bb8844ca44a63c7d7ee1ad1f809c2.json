{"ast":null,"code":"import { list_Users, add_User } from \"@/pluginsAxios/request\";\nexport default {\n  name: \"users\",\n  data() {\n    return {\n      tableData: [],\n      pageQuery: {\n        pageFrom: 0,\n        pageNum: 10,\n        likeVal: \"\",\n        pageSizes: [5, 10, 20, 50]\n      },\n      dialog: {\n        title: \"\",\n        isShow: false,\n        component: () => import(\"@/components/account/edit\")\n      }\n    };\n  },\n  created() {\n    this.getListUsers();\n  },\n  methods: {\n    getListUsersSizeChange() {\n      this.pageQuery.pageFrom = 0;\n      this.getListUsers();\n    },\n    // 分页查询\n    getListUsers() {\n      this.$emit(\"loading\", true);\n      list_Users(this.pageQuery.pageFrom, this.pageQuery.pageNum, this.pageQuery.likeVal).then(res => {\n        if (res.data.code == 200) {\n          this.tableData = res.data.data;\n        } else {\n          this.$message.error(res.data.message);\n        }\n      }).catch(err => {\n        this.$message.error(err.message);\n      }).finally(() => this.$emit(\"loading\", false));\n    },\n    // 添加用户\n    addUser() {\n      this.dialog.title = \"添加用户\";\n      this.dialog.isShow = true;\n    },\n    getFromData(formData) {\n      const param = new FormData();\n      for (let key in formData) {\n        param.append(key, formData[key]);\n        this.getListUsers();\n      }\n      add_User(param).then(res => {\n        this.$message.success(res.data.message);\n      }).catch(err => {\n        this.$message.error(res.data.message);\n      }).finally(() => {\n        this.dialog.isShow = false;\n      });\n    }\n  }\n};","map":{"version":3,"names":["list_Users","add_User","name","data","tableData","pageQuery","pageFrom","pageNum","likeVal","pageSizes","dialog","title","isShow","component","created","getListUsers","methods","getListUsersSizeChange","$emit","then","res","code","$message","error","message","catch","err","finally","addUser","getFromData","formData","param","FormData","key","append","success"],"sources":["src/views/content/account.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-button class=\"addUser\" type=\"primary\" @click=\"addUser\">添加</el-button>\r\n    <el-input\r\n      class=\"search\"\r\n      placeholder=\"请输入搜索内容\"\r\n      v-model=\"pageQuery.likeVal\"\r\n      style=\"width: 200px; margin-bottom: 10px;\"\r\n    >\r\n      <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getListUsers\"></el-button>\r\n    </el-input>\r\n\r\n    <el-table :data=\"tableData.records\">\r\n      <el-table-column prop=\"id\" label=\"ID\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\r\n      <el-table-column prop=\"icon\" label=\"头像\"></el-table-column>\r\n      <el-table-column prop=\"password\" label=\"密码\"></el-table-column>\r\n      <el-table-column prop=\"phone\" label=\"电话\"></el-table-column>\r\n      <el-table-column prop=\"email\" label=\"邮箱\"></el-table-column>\r\n      <el-table-column prop=\"active\" label=\"是否存活\"></el-table-column>\r\n    </el-table>\r\n\r\n    <el-pagination\r\n      :current-page.sync=\"pageQuery.pageFrom\"\r\n      :page-sizes=\"pageQuery.pageSizes\"\r\n      :page-size.sync=\"pageQuery.pageNum\"\r\n      :page-count=\"tableData.pages\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"tableData.total\"\r\n      @size-change=\"getListUsersSizeChange\"\r\n      @current-change=\"getListUsers\"\r\n    />\r\n\r\n    <el-dialog :title=\"dialog.title\" :visible.sync=\"dialog.isShow\" width=\"30%\">\r\n      <component :is=\"dialog.component\" v-on:formData=\"getFromData\"/>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { list_Users, add_User } from \"@/pluginsAxios/request\";\r\n\r\nexport default {\r\n  name: \"users\",\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      pageQuery: {\r\n        pageFrom: 0,\r\n        pageNum: 10,\r\n        likeVal: \"\",\r\n        pageSizes: [5, 10, 20, 50],\r\n      },\r\n      dialog: {\r\n        title: \"\",\r\n        isShow: false,\r\n        component: () => import(\"@/components/account/edit\"),\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.getListUsers();\r\n  },\r\n  methods: {\r\n    getListUsersSizeChange() {\r\n      this.pageQuery.pageFrom = 0;\r\n      this.getListUsers();\r\n    },\r\n\r\n    // 分页查询\r\n    getListUsers() {\r\n      this.$emit(\"loading\", true);\r\n      list_Users(\r\n        this.pageQuery.pageFrom,\r\n        this.pageQuery.pageNum,\r\n        this.pageQuery.likeVal\r\n      )\r\n        .then((res) => {\r\n          if (res.data.code == 200) {\r\n            this.tableData = res.data.data;\r\n          } else {\r\n            this.$message.error(res.data.message);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.$message.error(err.message);\r\n        })\r\n        .finally(() => this.$emit(\"loading\", false));\r\n    },\r\n\r\n    // 添加用户\r\n    addUser() {\r\n      this.dialog.title = \"添加用户\";\r\n      this.dialog.isShow = true;\r\n    },\r\n\r\n    getFromData(formData){\r\n        const param = new FormData();\r\n        for(let key in formData) {\r\n            param.append(key, formData[key]);\r\n            this.getListUsers();\r\n        }\r\n        add_User(param).then(res=>{\r\n            this.$message.success(res.data.message);\r\n        }).catch((err) => {\r\n            this.$message.error(res.data.message);\r\n        }).finally(()=>{\r\n            this.dialog.isShow = false;\r\n        }\r\n        )\r\n    }\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.el-pagination {\r\n  text-align: right;\r\n}\r\n.addUser {\r\n  float: right;\r\n}\r\n.search {\r\n  float: right;\r\n  margin-right: 20px;\r\n}\r\n</style>"],"mappings":"AAwCA,SAAAA,UAAA,EAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,SAAA;QACAC,QAAA;QACAC,OAAA;QACAC,OAAA;QACAC,SAAA;MACA;MACAC,MAAA;QACAC,KAAA;QACAC,MAAA;QACAC,SAAA,EAAAA,CAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACAC,uBAAA;MACA,KAAAZ,SAAA,CAAAC,QAAA;MACA,KAAAS,YAAA;IACA;IAEA;IACAA,aAAA;MACA,KAAAG,KAAA;MACAlB,UAAA,CACA,KAAAK,SAAA,CAAAC,QAAA,EACA,KAAAD,SAAA,CAAAE,OAAA,EACA,KAAAF,SAAA,CAAAG,OACA,EACAW,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAjB,IAAA,CAAAkB,IAAA;UACA,KAAAjB,SAAA,GAAAgB,GAAA,CAAAjB,IAAA,CAAAA,IAAA;QACA;UACA,KAAAmB,QAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAjB,IAAA,CAAAqB,OAAA;QACA;MACA,GACAC,KAAA,CAAAC,GAAA;QACA,KAAAJ,QAAA,CAAAC,KAAA,CAAAG,GAAA,CAAAF,OAAA;MACA,GACAG,OAAA,YAAAT,KAAA;IACA;IAEA;IACAU,QAAA;MACA,KAAAlB,MAAA,CAAAC,KAAA;MACA,KAAAD,MAAA,CAAAE,MAAA;IACA;IAEAiB,YAAAC,QAAA;MACA,MAAAC,KAAA,OAAAC,QAAA;MACA,SAAAC,GAAA,IAAAH,QAAA;QACAC,KAAA,CAAAG,MAAA,CAAAD,GAAA,EAAAH,QAAA,CAAAG,GAAA;QACA,KAAAlB,YAAA;MACA;MACAd,QAAA,CAAA8B,KAAA,EAAAZ,IAAA,CAAAC,GAAA;QACA,KAAAE,QAAA,CAAAa,OAAA,CAAAf,GAAA,CAAAjB,IAAA,CAAAqB,OAAA;MACA,GAAAC,KAAA,CAAAC,GAAA;QACA,KAAAJ,QAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAjB,IAAA,CAAAqB,OAAA;MACA,GAAAG,OAAA;QACA,KAAAjB,MAAA,CAAAE,MAAA;MACA,CACA;IACA;EAEA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}